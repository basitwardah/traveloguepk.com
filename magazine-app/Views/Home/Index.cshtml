@model IEnumerable<magazine_app.ViewModels.GuideListViewModel>

@{
    ViewData["Title"] = "Home";
}
<style>
    @@keyframes float {
        0%, 100% {
            transform: translateY(0px) translateX(-50%);
        }

        50% {
            transform: translateY(-20px) translateX(-50%);
        }
    }

    .animate-float {
        animation: float 3s ease-in-out infinite;
    }
</style>
<!-- Hero Section -->
<section class="relative h-screen">
    <!-- Hero Background -->
    <div class="absolute inset-0">
        <img src="~/images/hero-bg.jpg" alt="Pakistan's Beauty" class="w-full h-full object-cover" 
             onerror="this.src='https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920'">
        <div class="absolute inset-0 bg-gradient-to-r from-dark-navy/70 to-dark-navy/30"></div>
    </div>
    
    <!-- Hero Content -->
    <div class="relative container mx-auto px-4 h-full flex items-center">
        <div class="max-w-3xl">
            <div class="orange-label mb-6 animate-fade-in">
                TRAVELOGUE PK
            </div>
            <h1 class="hero-title text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight">
                DISCOVERING ALL <br>
                <span class="text-primary-orange">PAKISTAN'S HIDDEN</span><br>
                WONDERS
            </h1>
            <p class="text-white text-lg md:text-xl mb-8 max-w-2xl">
                Travelogue PK is your gateway to Pakistan's hidden gems. Step into journey closer to the untold wonders of majestic landscapes, centuries-old heritage, and vibrant cultures to timeless memories.
            </p>
            <div class="flex flex-wrap gap-4">
                <a asp-controller="Categories" asp-action="Index" class="bg-primary-blue hover:bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg transition-all inline-flex items-center shadow-lg hover:shadow-xl transform hover:scale-105">
                    START YOUR ADVENTURE
                    <i class="fas fa-arrow-right ml-3"></i>
                </a>
                <button class="bg-white hover:bg-gray-100 text-dark-navy px-8 py-4 rounded-lg font-semibold text-lg transition-all shadow-lg hover:shadow-xl">
                    LEARN MORE
                </button>
            </div>
        </div>
        
        <!-- Magazine Mockup (Right Side) -->
        <div class="hidden xl:block absolute right-20 top-1/2 transform -translate-y-1/2">
            <img src="~/images/magazine-3d.png" alt="Magazine" class="w-96 animate-float" 
                 onerror="this.style.display='none'">
        </div>
    </div>
</section>

<!-- Mountain Divider -->
<div class="mountain-divider mountain-divider-white"></div>

<!-- Pakistan Beauty Section -->
<section class="py-20 bg-white">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <!-- Image -->
            <div class="order-2 lg:order-1">
                <div class="relative">
                    <img src="~/images/pakistan-beauty.jpg" alt="Pakistan Beauty" class="rounded-full w-full max-w-lg mx-auto shadow-2xl" 
                         onerror="this.src='https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800'">
                    <!-- Decorative Circle -->
                    <div class="absolute -bottom-10 -right-10 w-64 h-64 bg-primary-orange rounded-full -z-10 opacity-20"></div>
                </div>
            </div>
            
            <!-- Content -->
            <div class="order-1 lg:order-2">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                    PAKISTAN <span class="text-primary-orange">UNBELIEVABLE<br>BEAUTY</span> OF WORLD.
                </h2>
                
                <!-- Feature 1 -->
                <div class="flex items-start mb-6 bg-gray-50 p-6 rounded-lg">
                    <div class="bg-primary-orange text-white rounded-lg p-4 mr-4">
                        <i class="fas fa-mountain text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Step beyond the ordinary and dive into a world towering peaks touching.</h3>
                        <p class="text-gray-600">
                            The skies and emerald rivers carve their way through gorgeous natural valleys. From the mystical beauty of the Hunza Valley to the golden silence of the Cholistan Desert, every corner of Pakistan holds an adventure waiting to be discovered.
                        </p>
                    </div>
                </div>
                
                <!-- Feature 2 -->
                <div class="flex items-start mb-6 bg-gray-50 p-6 rounded-lg">
                    <div class="bg-primary-orange text-white rounded-lg p-4 mr-4">
                        <i class="fas fa-landmark text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Venture into hidden landscapes where nature reigns supreme & history whispers through ancient ruins</h3>
                        <p class="text-gray-600">
                            Journey to serene valleys nestled between snow-capped peaks. Traverse trails where mighty mountains meet crystalline lakes. Trace the footprints of ancient civilizations at the enigmatic ruins. Explore.
                        </p>
                    </div>
                </div>
                
                <button class="bg-primary-orange hover:bg-orange-600 text-white px-8 py-3 rounded-lg font-semibold transition-all inline-flex items-center shadow-lg">
                    EXPLORE MORE
                    <i class="fas fa-arrow-right ml-3"></i>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Mountain Divider -->
<div class="mountain-divider mountain-divider-blue"></div>

<!-- Explore Pakistan Section -->
<section class="py-20 bg-dark-navy text-white">
    <div class="container mx-auto px-4">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">
                EXPLORE PAKISTAN, WHERE ADVENTURE<br>MEETS WONDER
            </h2>
            <p class="text-gray-300 text-lg max-w-3xl mx-auto">
                Travelogue PK is a journey through Pakistan's hidden treasure, showcasing the splendor of mountain peaks, emerald valleys, ancient landmarks. It's a roadmap to discover and find your story, one journey at a time.
            </p>
        </div>
        
        <!-- Magazine Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
            @{
                int colorIndex = 0;
                var gradients = new[] {
                    new { From = "orange-400", To = "orange-600", Badge = "orange" },
                    new { From = "blue-400", To = "blue-600", Badge = "blue" },
                    new { From = "orange-400", To = "orange-600", Badge = "orange" },
                    new { From = "blue-400", To = "blue-600", Badge = "blue" }
                };
            }
            
            @foreach (var guide in Model)
            {
                var gradient = gradients[colorIndex % gradients.Length];
                colorIndex++;
                var categoryText = !string.IsNullOrEmpty(guide.CategoryName) ? guide.CategoryName.ToUpper() : "MAGAZINE";
                var hasDiscount = guide.OldPrice > guide.CurrentPrice && guide.CurrentPrice > 0;
                var discountPercent = hasDiscount ? Math.Round(((guide.OldPrice - guide.CurrentPrice) / guide.OldPrice) * 100) : 0;
                
                <div class="card-hover bg-gray-800/50 backdrop-blur-sm rounded-xl shadow-xl overflow-hidden group transform transition-all duration-300 hover:-translate-y-2 border border-gray-700/50">
                    <div class="relative">
                        <div class="bg-gradient-to-br from-@gradient.From to-@gradient.To p-6 h-72 flex items-center justify-center relative overflow-hidden">
                            <img src="@guide.CoverImagePath" 
                                 alt="@guide.Title" 
                                 class="h-full object-contain relative z-10 transform group-hover:scale-110 transition-transform duration-500" 
                                 onerror="this.src='https://placehold.co/300x400/@(gradient.Badge == "orange" ? "FF6B35" : "0C789A")/FFFFFF?text=@guide.Title'">
                            
                            <!-- Hover Overlay -->
                            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end justify-center pb-4 z-20">
                                <a asp-controller="Guide" asp-action="Read" asp-route-slug="@guide.Slug" 
                                   class="bg-white text-gray-900 px-5 py-2 rounded-lg font-semibold hover:bg-primary-orange hover:text-white transition-all shadow-lg transform hover:scale-105">
                                    <i class="fas fa-book-open mr-2"></i>Read Now
                                </a>
                            </div>
                            
                            <!-- Discount Badge -->
                            @if (hasDiscount)
                            {
                                <div class="absolute top-3 left-3 bg-red-500 text-white px-2.5 py-1 rounded-full text-xs font-bold shadow-lg z-10 animate-pulse">
                                    -@discountPercent%
                                </div>
                            }
                            
                            <!-- Category Badge -->
                            <div class="absolute bottom-3 left-3 bg-white/95 backdrop-blur-sm text-gray-800 px-2.5 py-1 rounded-full text-xs font-bold shadow-lg">
                                @categoryText
                            </div>
                            
                            <!-- Favorite Button - Top Right -->
                            @if (User.Identity != null && User.Identity.IsAuthenticated)
                            {
                                <button onclick="toggleFavorite(@guide.Id, this)" 
                                        class="favorite-btn absolute top-3 right-3 bg-white/95 backdrop-blur-sm hover:bg-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg transition-all z-30 hover:scale-110"
                                        data-guide-id="@guide.Id"
                                        title="@(guide.IsFavorited ? "Remove from favorites" : "Add to favorites")">
                                    <i class="@(guide.IsFavorited ? "fas" : "far") fa-heart @(guide.IsFavorited ? "text-red-500" : "text-gray-600")"></i>
                                </button>
                            }
                            else
                            {
                                <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="@Context.Request.Path@Context.Request.QueryString"
                                   class="absolute top-3 right-3 bg-white backdrop-blur-sm hover:bg-gray-50 rounded-full w-10 h-10 flex items-center justify-center shadow-lg transition-all z-30 hover:scale-110"
                                   title="Login to add favorites">
                                    <i class="far fa-heart text-gray-600 hover:text-red-500"></i>
                                </a>
                            }
                        </div>
                    </div>
                    
                    <div class="p-4 bg-gray-800/70">
                        <h3 class="text-base font-bold mb-2 text-white group-hover:text-primary-orange transition-colors line-clamp-2 min-h-[3rem]">
                            @guide.Title
                        </h3>
                        @if (!string.IsNullOrEmpty(guide.Summary))
                        {
                            <p class="text-gray-300 text-xs line-clamp-2 mb-3 min-h-[2.5rem]">@guide.Summary</p>
                        }
                        else
                        {
                            <p class="text-gray-400 text-xs mb-3 italic min-h-[2.5rem]">Discover more...</p>
                        }
                        
                        <!-- Pricing -->
                        <div class="mb-3 pb-3 border-b border-gray-700">
                            @if (guide.CurrentPrice > 0)
                            {
                                <div class="flex items-center gap-2">
                                    <span class="text-xl font-bold text-primary-orange">$@guide.CurrentPrice.ToString("F2")</span>
                                    @if (guide.OldPrice > guide.CurrentPrice)
                                    {
                                        <span class="text-xs text-gray-400 line-through">$@guide.OldPrice.ToString("F2")</span>
                                    }
                                </div>
                            }
                            else
                            {
                                <div class="flex items-center gap-2">
                                    <span class="text-lg font-bold text-green-400">FREE</span>
                                    <span class="bg-green-500/20 text-green-400 text-xs px-2 py-0.5 rounded-full font-semibold">Read Now</span>
                                </div>
                            }
                        </div>
                        
                        <div class="flex items-center justify-between text-xs text-gray-400">
                            <span>
                                <i class="far fa-calendar mr-1"></i>@guide.CreatedAt.ToString("MMM yyyy")
                            </span>
                            <a asp-controller="Guide" asp-action="Detail" asp-route-slug="@guide.Slug" 
                               class="text-primary-orange hover:text-orange-400 font-semibold">
                                Details →
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
        
      
        <!-- View More Button -->
        <div class="text-center">
            <a asp-controller="Categories" asp-action="Index" class="bg-primary-blue hover:bg-blue-600 text-white px-10 py-4 rounded-lg font-semibold text-lg transition-all inline-flex items-center shadow-lg">
                VIEW MORE
                <i class="fas fa-arrow-right ml-3"></i>
            </a>
        </div>
    </div>
</section>

<!-- Mountain Divider -->
<div class="mountain-divider mountain-divider-white"></div>

<!-- Video Section -->
<section class="py-20 bg-white">
    <div class="container mx-auto px-4">
        <div class="text-center mb-12">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                LET'S MAKE <span class="text-primary-orange">YOUR JOURNEY</span> MOMENTOUS
            </h2>
        </div>
        
        <div class="max-w-4xl mx-auto">
            <div class="relative rounded-2xl overflow-hidden shadow-2xl">
                <img src="~/images/video-thumbnail.jpg" alt="Journey Video" class="w-full" 
                     onerror="this.src='https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200'">
                <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                    <button class="video-play-btn">
                        <i class="fas fa-play text-white text-2xl ml-1"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Mountain Divider -->
<div class="mountain-divider mountain-divider-orange"></div>

<!-- How It Works Section -->
<section class="py-20 bg-primary-orange text-white relative overflow-hidden">
    <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">HOW IT WORKS?</h2>
        </div>
        
        <!-- Steps Container -->
        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-7 gap-0 items-center">
                
                <!-- Step 1: Create Account -->
                <div class="md:col-span-2 text-center">
                    <div class="bg-white rounded-2xl p-8 mb-4 h-48 flex items-center justify-center shadow-xl mx-auto max-w-xs">
                        <div class="text-primary-blue">
                            <i class="fas fa-user-plus text-6xl"></i>
                        </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Create Account</h3>
                    <p class="text-white text-opacity-90 px-4">
                        Your Journey Starts Here – Create an Account and Explore more!
                    </p>
                </div>
                
                <!-- Dashed Arrow 1 -->
                <div class="md:col-span-1 hidden md:flex items-start justify-center pt-16">
                    <svg width="120" height="60" viewBox="0 0 120 60" class="transform -translate-y-12">
                        <!-- Dashed curved arrow -->
                        <path d="M 10 30 Q 60 10, 110 30" 
                              stroke="white" 
                              stroke-width="3" 
                              stroke-dasharray="8,8" 
                              fill="none" 
                              opacity="0.6"/>
                        <!-- Arrow head -->
                        <polygon points="110,30 100,25 100,35" 
                                fill="white" 
                                opacity="0.6"/>
                    </svg>
                </div>
                
                <!-- Step 2: Select Tour Package -->
                <div class="md:col-span-2 text-center">
                    <div class="bg-white rounded-2xl p-8 mb-4 h-48 flex items-center justify-center shadow-xl mx-auto max-w-xs">
                        <div class="text-primary-blue">
                            <i class="fas fa-book-open text-6xl"></i>
                        </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Select Tour Package</h3>
                    <p class="text-white text-opacity-90 px-4">
                        Your Dream Destination Awaits – Select a Package Today!
                    </p>
                </div>
                
                <!-- Dashed Arrow 2 -->
                <div class="md:col-span-1 hidden md:flex items-start justify-center pt-16">
                    <svg width="120" height="60" viewBox="0 0 120 60" class="transform -translate-y-12">
                        <!-- Dashed curved arrow -->
                        <path d="M 10 30 Q 60 10, 110 30" 
                              stroke="white" 
                              stroke-width="3" 
                              stroke-dasharray="8,8" 
                              fill="none" 
                              opacity="0.6"/>
                        <!-- Arrow head -->
                        <polygon points="110,30 100,25 100,35" 
                                fill="white" 
                                opacity="0.6"/>
                    </svg>
                </div>
                
                <!-- Step 3: Travel -->
                <div class="md:col-span-2 text-center">
                    <div class="bg-white rounded-2xl p-8 mb-4 h-48 flex items-center justify-center shadow-xl mx-auto max-w-xs">
                        <div class="text-primary-blue">
                            <i class="fas fa-plane-departure text-6xl"></i>
                        </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Travel</h3>
                    <p class="text-white text-opacity-90 px-4">
                        Pack your bags, step out of your comfort zone, and let the road lead you to memories.
                    </p>
                </div>
                
            </div>
        </div>
    </div>
    
    <!-- Background Decoration -->
    <div class="absolute inset-0 opacity-10 pointer-events-none">
        <div class="absolute top-10 left-10 w-64 h-64 bg-white rounded-full blur-3xl"></div>
        <div class="absolute bottom-10 right-10 w-96 h-96 bg-white rounded-full blur-3xl"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-white rounded-full blur-3xl opacity-50"></div>
    </div>
</section>

<!-- Mountain Divider -->
<div class="mountain-divider mountain-divider-white"></div>

<!-- Newsletter Section -->
<section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
        <div class="max-w-5xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <!-- Content -->
                <div>
                    <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                        JOIN <span class="text-primary-blue">THE BEST<br>STORYTELLERS</span> OF<br>WORLD
                    </h2>
                    <p class="text-gray-600 text-lg mb-8">
                        A collection of travel stories and stunning photos that help to plan big.
                    </p>
                    
                    <!-- Newsletter Form -->
                    <div class="flex gap-4">
                        <input type="email" placeholder="Enter Your Email" 
                               class="flex-1 px-6 py-4 border border-gray-300 rounded-lg focus:outline-none focus:border-primary-blue focus:ring-2 focus:ring-primary-blue focus:ring-opacity-20">
                        <button class="bg-primary-blue hover:bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold transition-all whitespace-nowrap">
                            SUBSCRIBE
                        </button>
                    </div>
</div>
                
                <!-- Image -->
                <div class="relative">
                    <div class="relative z-10">
                        <img src="~/images/storyteller.jpg" alt="Storyteller" class="rounded-full w-full max-w-md mx-auto shadow-2xl" 
                             onerror="this.src='https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=600'">
                    </div>
                    <!-- Decorative Circle -->
                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full bg-primary-blue rounded-full -z-0 scale-110 opacity-10"></div>
                </div>
            </div>
        </div>
    </div>
</section>



@section Scripts {
    <script>
             function toggleFavorite(guideId, button) {
            button.disabled = true;

            fetch('/Favorite/Toggle', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'RequestVerificationToken': document.querySelector('input[name="__RequestVerificationToken"]')?.value || ''
                },
                body: JSON.stringify({ guideId: guideId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {

                    const icon = button.querySelector('i');

                    if (data.isFavorited) {
                        icon.classList.remove('far', 'text-gray-600');
                        icon.classList.add('fas', 'text-red-500');
                        button.title = 'Remove from favorites';
                        showToast('Added to favorites!', 'success');
                    } else {
                        icon.classList.remove('fas', 'text-red-500');
                        icon.classList.add('far', 'text-gray-600');
                        button.title = 'Add to favorites';
                        showToast('Removed from favorites', 'info');
                    }

                } else {
                    if (data.isAuthenticated === false) {
                        window.location.href = '/Account/Login?returnUrl=' + encodeURIComponent(window.location.pathname);
                    } else {
                        showToast(data.message || 'Error occurred', 'error');
                    }
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showToast('Error occurred. Please try again.', 'error');
            })
            .finally(() => {
                button.disabled = false;
            });
        }

    </script>
}
